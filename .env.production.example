# Production environment template
# Copy this to .env.production and fill in actual values

# ============================================
# DATABASE - Supabase (PostgreSQL with PostGIS)
# ============================================
# Get connection string from Supabase Project Settings -> Database
# Format: postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[region].pooler.supabase.com:5432/postgres
DATABASE_URL=postgresql://postgres.your-project-ref:CHANGE_ME_STRONG_PASSWORD@aws-0-us-east-1.pooler.supabase.com:5432/postgres

# Connection pooling (Supabase provides this by default)
# Use Transaction mode for better performance
# Direct connection: postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
DATABASE_NAME=postgres
DATABASE_USER=postgres
DATABASE_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# ============================================
# REDIS
# ============================================
REDIS_URL=redis://:CHANGE_ME@redis:6379/0
REDIS_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# ============================================
# RABBITMQ
# ============================================
RABBITMQ_URL=amqp://floodwatch:CHANGE_ME@rabbitmq:5672
RABBITMQ_USER=floodwatch
RABBITMQ_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# ============================================
# SECURITY
# ============================================
# Generate with: openssl rand -hex 32
SECRET_KEY=CHANGE_ME_GENERATE_WITH_OPENSSL
JWT_SECRET_KEY=CHANGE_ME_GENERATE_WITH_OPENSSL

# ============================================
# DOCKER IMAGES
# ============================================
BACKEND_IMAGE=ghcr.io/yourorg/flood-watch/backend:latest
FRONTEND_IMAGE=ghcr.io/yourorg/flood-watch/frontend:latest

# ============================================
# WHATSAPP (360Dialog)
# ============================================
WHATSAPP_API_KEY=your_360dialog_api_key
WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id
WHATSAPP_API_URL=https://waba.360dialog.io/v1

# ============================================
# TELEGRAM
# ============================================
TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# ============================================
# WEATHER API
# ============================================
OPENWEATHER_API_KEY=your_openweather_api_key

# ============================================
# AWS S3
# ============================================
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_BUCKET=floodwatch-media-prod
AWS_REGION=us-east-1

# ============================================
# MONITORING & ERROR TRACKING
# ============================================
SENTRY_DSN=your_sentry_dsn
ENVIRONMENT=production

# ============================================
# SECURITY & CORS
# ============================================
ALLOWED_ORIGINS=https://admin.floodwatch.org,https://floodwatch.org
DEBUG=false

# ============================================
# ALERT CONFIGURATION
# ============================================
ALERT_RADIUS_BUFFER_KM=2.0
MIN_REPORTS_FOR_INCIDENT=3
VERIFICATION_CONFIDENCE_THRESHOLD=0.6

# ============================================
# ML MODEL
# ============================================
ML_MODEL_PATH=/app/ml/model/flood_detector_v1.h5

# ============================================
# SUPABASE (Optional Enhanced Features)
# ============================================
# Get these from Supabase Project Settings -> API
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-role-key

# Feature Flags
USE_SUPABASE_AUTH=false  # Use Supabase Auth instead of custom JWT
USE_SUPABASE_STORAGE=false  # Use Supabase Storage instead of AWS S3
USE_SUPABASE_REALTIME=false  # Enable realtime subscriptions
